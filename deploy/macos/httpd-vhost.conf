# Apache Virtual Host for macOS
# Add to /etc/apache2/extra/httpd-contextual.conf
# Include in httpd.conf: Include /etc/apache2/extra/httpd-contextual.conf

<VirtualHost *:80>
    ServerName localhost
    DocumentRoot "/Library/WebServer/Documents/contextual-ai"

    <Directory "/Library/WebServer/Documents/contextual-ai">
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted

        # Enable SPA routing
        RewriteEngine On
        RewriteBase /
        RewriteRule ^index\.html$ - [L]
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule . /index.html [L]
    </Directory>

    # Security headers
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-XSS-Protection "1; mode=block"

    ErrorLog "/var/log/apache2/contextual-ai-error_log"
    CustomLog "/var/log/apache2/contextual-ai-access_log" common
</VirtualHost>